<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="task2.css">
</head>

<body>
    <h3 class="hd">API WEATHER APPLICATION</h3>
    <div class="card">
        <div class="search">
            <input type="text" placeholder="Enter City Name" spellcheck="false">
            <button><img src="search.png"></button>
        </div>
        <div class="weather">
            <img src="rain.png" class="weater-icon">
            <h1 class="temp">22 Â°C </h1>
            <h2 class="city">Faisalabad</h2>
            <div class="details">
                <div class="col">
                    <img src="humidity.png">
                    <div>
                        <p class="humidity">39%</p>
                        <p>Humidity</p>
                    </div>
                </div>
                <div class="col">
                    <img src="wind.png">
                    <div>
                        <p class="wind">15 Km/h</p>
                        <p>Windspeed</p>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Temperature</th>
                <th>Weather</th>
                <th>Feels Like</th>
                <th>Humidity</th>
            </tr>
        </thead>
        <tbody>
            <tr id="day1">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr id="day2">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr id="day3">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr id="day4">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr id="day5">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </tbody>
    </table>
    <script>


        const apikey = "c7c8d5cce2a640a026a47ced81a37626";
        const apiUrl = "https://api.openweathermap.org/data/2.5/forecast?units=metric&q=faisalabad";

        async function checkweather() {
            const response = await fetch(apiUrl + &appid=${apikey});
            var data = await response.json();

            console.log(data)

            document.querySelectorAll(".city").innerHTML = date.name;
            document.querySelector(".temp").innerHTML = data.main.temp;
            document.querySelector(".humidity").innerHTML = data.main.humidity;
            document.querySelectorAll(".wind").innerHTML = data.list[0].weather.wind.speed;
        }
        checkweather();
    </script>
    <script>
        const url = https://api.openweathermap.org/data/2.5/forecast?q=faisalabad&appid=c7c8d5cce2a640a026a47ced81a37626;

        document.querySelector('button').addEventListener('click', function (e) {
            let name = document.querySelector('input').value;
            if (name) {
                const url = https://api.openweathermap.org/data/2.5/forecast?q=Faisalabad&appid=c7c8d5cce2a640a026a47ced81a37626;
                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        for (let i = 0; i < 5; i++) {
                            let date = new Date();
                            document.querySelectorAll(#day${i + 1}>td)[0].innerHTML = ${date.getDate() + i} March 2024;
                            document.querySelectorAll(#day${i + 1}>td)[1].innerHTML = ${parseInt(data.list[i * 8].main.temp - 273.15)}&#176C;
                            document.querySelectorAll(#day${i + 1}>td)[2].innerHTML = data.list[i * 8].weather[0].main;
                            document.querySelectorAll(#day${i + 1}>td)[3].innerHTML = ${parseInt(data.list[i * 8].main.feels_like - 273.15)}&#176C;
                            document.querySelectorAll(#day${i + 1}>td)[4].innerHTML = data.list[i * 8].main.humidity;
                            document.querySelector('table').style.display = 'block';
                        }
                    })
                    .catch(error => {
                        alert('Please enter a valid city name');
                    })
            } else {
                alert('Please Enter City Name');
            }
        });
    </script>
</body>

</html>